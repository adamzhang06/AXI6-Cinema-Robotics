<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AXI6 Robot Cinema Robotics</title>
    <!-- We load the compiled output from Tailwind -->
    <link rel="stylesheet" href="style.css">
    <style>
        /* Hide scrollbar for curve area */
        #curve-area::-webkit-scrollbar {
            display: none;
        }

        #curve-area {
            -ms-overflow-style: none;
            /* IE and Edge */
            scrollbar-width: none;
            /* Firefox */
        }
    </style>
</head>

<body class="bg-[var(--bg-gap)] h-screen w-screen overflow-hidden text-[#cccccc] font-apple antialiased">

    <!-- Application Layout: Top Navbar (36px) | Main Workspace Area (1fr) -->
    <div class="grid grid-rows-[24px_1fr] h-screen w-screen gap-[2px]">

        <!-- Full-Width Top Navbar -->
        <div class="bg-[var(--bg-main-light)] flex items-center text-xs w-full h-full text-white">
            <!-- Matches the 50px Toolbar exactly, centering the AXI6 text above the logo -->
            <div class="w-[50px] flex justify-center shrink-0">
                <span class="opacity-100 font-bold tracking-wider">AXI6</span>
            </div>
            <!-- Matches the 2px gap exactly, centering the | separator above the vertical line -->
            <div class="w-[2px] flex justify-center items-center overflow-visible shrink-0 text-[#cccccc]">
                <span class="opacity-30">|</span>
            </div>
            <span class="opacity-100 font-bold pl-3 text-[#cccccc]">Cinema Robotics</span>
        </div>

        <!-- Main Workspace Area: Toolbar(50px) | Center Content(1fr) | Right Sidebar(300px) -->
        <div class="grid grid-cols-[50px_1fr_300px] gap-[2px] h-full overflow-hidden">

            <!-- 1. Far Left Toolbar -->
            <div class="bg-[var(--bg-main)] flex flex-col p-1 pt-2 items-center gap-4" id="toolbar">
                <div class="toolbar-btn">
                    <img src="assets/axi6_logo.png" alt="LOGO" class="w-full h-full object-contain brightness-150">
                </div>

                <hr class="border-white/10 w-8">

                <button id="btn-toggle-camera"
                    class="w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white/10 text-white/50 hover:text-white transition-colors"
                    title="Toggle Camera">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path
                            d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z" />
                        <circle cx="12" cy="13" r="3" />
                    </svg>
                </button>
            </div>

            <!-- 2. Main Content Area (Spans everything between Toolbar and Right Sidebar) -->
            <!-- Contains a top row (Left Sidebar + Viewport) and a bottom row (Timeline), split 50/50 -->
            <div class="grid grid-rows-[1fr_1fr] gap-[2px]">

                <!-- Top Section: Left Sidebar + Viewport -->
                <div class="grid grid-cols-[320px_1fr] gap-[2px]">
                    <!-- Left Sidebar (Robot Controls) -->
                    <div class="bg-[var(--bg-main)] flex flex-col p-2" id="left-sidebar">
                        <h2 class="panel-header">Robot Controls</h2>



                        <!-- Placeholder for controls -->
                    </div>

                    <!-- Top Viewport -->
                    <div class="bg-[var(--bg-main)] flex flex-col p-2 relative min-h-0 min-w-0" id="viewport">

                        <!-- Default Viewport Label -->
                        <h2 id="viewport-label"
                            class="panel-header absolute top-2 left-2 z-10 text-white/100 pointer-events-none">VIEWPORT
                        </h2>

                        <!-- Camera Active Label -->
                        <div id="camera-label-container"
                            class="absolute top-4 left-4 z-10 bg-black/50 backdrop-blur-md px-2 py-1 flex items-center gap-2 rounded text-white/80 hidden pointer-events-none">
                            <h2 class="panel-header !mb-0">CAMERA</h2>
                            <div id="camera-indicator" class="w-2.5 h-2.5 rounded-full bg-red-600 hidden"
                                style="animation: pulse 0.75s cubic-bezier(0.4, 0, 0.6, 1) infinite;"></div>
                        </div>

                        <!-- WebCam Feed -->
                        <div
                            class="w-full bg-[var(--bg-lighter)] rounded flex-1 overflow-hidden relative min-h-0 min-w-0">
                            <video id="webcam-preview" autoplay playsinline muted
                                class="absolute inset-0 w-full h-full object-cover bg-black hidden -scale-x-100"></video>
                        </div>
                    </div>
                </div>

                <!-- Bottom Section: Timeline -->
                <div class="flex flex-col gap-[2px] h-full overflow-hidden" id="timeline">

                    <!-- Split Top Header Area -->
                    <div class="h-[48px] grid grid-cols-[200px_1fr] gap-[2px] w-full shrink-0">

                        <!-- Left Settings Area (Matches Left Sidebar color) -->
                        <div class="bg-[var(--bg-main)] px-2 flex items-center justify-between h-full">
                            <h2 class="panel-header !mb-0 text-white/100">TIMELINE</h2>
                        </div>

                        <!-- Right Functionality Area -->
                        <div class="secondary-header justify-center relative !py-0 px-4">
                            <!-- Left: Frame Info -->
                            <!-- Frame Counter -->
                            <div
                                class="absolute left-4 font-mono text-[10px] text-white/40 tracking-wider flex items-center gap-1">
                                <span>FRAME:</span>
                                <span id="frame-counter" class="text-white/80 w-[24px] text-right">0</span>
                                <span>/ 1800</span>
                            </div>

                            <!-- Playback Controls -->
                            <div class="flex items-center gap-1.5 p-0.5">
                                <!-- Eraser Tool -->
                                <button class="playback-btn" title="Eraser Tool">
                                    <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round">
                                        <path
                                            d="m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21" />
                                        <path d="M22 21H7" />
                                        <path d="m5 11 9 9" />
                                    </svg>
                                </button>

                                <!-- Magnet Tool (Snap) -->
                                <button class="playback-btn" title="Snap to Grid">
                                    <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round">
                                        <path
                                            d="m6 15-4-4 6.75-6.77a7.79 7.79 0 0 1 11 11L13 22l-4-4 6.39-6.36a2.14 2.14 0 0 0-3-3L6 15">
                                        </path>
                                        <path d="m5 8 4 4"></path>
                                        <path d="m12 15 4 4"></path>
                                    </svg>
                                </button>

                                <!-- Left Separator -->
                                <div class="w-[1px] h-4 bg-white/20"></div>

                                <!-- Skip Left -->
                                <button id="btn-skip-left" class="playback-btn" title="Skip Left">
                                    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M18 5.5v13L8 12l10-6.5z" />
                                        <path d="M6 5.5h2v13H6v-13z" />
                                    </svg>
                                </button>
                                <!-- Play Left -->
                                <button id="btn-play-left" class="playback-btn" title="Play Left">
                                    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M18 5.5v13L8 12l10-6.5z" />
                                    </svg>
                                </button>
                                <!-- Pause -->
                                <button id="btn-pause" class="playback-btn" title="Pause">
                                    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M6 5.5h4v13H6v-13zm8 0h4v13h-4v-13z" />
                                    </svg>
                                </button>
                                <!-- Play Right -->
                                <button id="btn-play-right" class="playback-btn" title="Play Right">
                                    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M6 5.5v13L16 12 6 5.5z" />
                                    </svg>
                                </button>
                                <!-- Skip Right -->
                                <button id="btn-skip-right" class="playback-btn" title="Skip Right">
                                    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M6 5.5v13L16 12 6 5.5z" />
                                        <path d="M16 5.5h2v13h-2v-13z" />
                                    </svg>
                                </button>

                                <!-- Right Separator -->
                                <div class="w-[1px] h-4 bg-white/20"></div>

                                <!-- Zoom Controls -->
                                <div
                                    class="flex items-center gap-1.5 ml-2 text-white/50 hover:text-white transition-colors">
                                    <button
                                        class="w-4 h-4 flex items-center justify-center p-0 hover:bg-white/10 rounded"
                                        title="Zoom Out" id="zoom-out-btn">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <line x1="5" y1="12" x2="19" y2="12"></line>
                                        </svg>
                                    </button>
                                    <input type="range" id="zoom-slider" min="0" max="100" value="50"
                                        class="w-20 h-1 bg-white/20 rounded-lg appearance-none cursor-pointer accent-[var(--highlight)]">
                                    <button
                                        class="w-4 h-4 flex items-center justify-center p-0 hover:bg-white/10 rounded"
                                        title="Zoom In" id="zoom-in-btn">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <line x1="12" y1="5" x2="12" y2="19"></line>
                                            <line x1="5" y1="12" x2="19" y2="12"></line>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- Main Dark Area for Bezier Curves -->
                    <div class="flex-1 relative overflow-hidden grid grid-cols-[200px_1fr] gap-[2px] min-w-0">

                        <!-- The tracks area on the left (matches settings width) -->
                        <div class="bg-[var(--bg-main)] flex flex-col z-50">

                            <!-- Timer (Aligned with Ruler) -->
                            <div class="h-[30px] shrink-0 bg-[var(--bg-main)] flex items-center justify-center z-10 relative"
                                style="border-bottom: 2px solid #0a0a0c;">
                                <h2 class="font-mono tracking-wider text-[var(--highlight)] text-[14px]"
                                    id="timeline-timer">00:00:00:00</h2>
                            </div>

                            <!-- Slide Track -->
                            <div class="track-block !h-auto flex-1 flex flex-col justify-center gap-6" id="track-slide"
                                data-name="Slide" data-color="#FFD500">
                                <div class="flex items-center justify-start gap-2 w-full">
                                    <span class="track-title">Slide</span>
                                    <!-- Future track controls (visibility, lock, color etc) -->
                                    <div class="track-indicator bg-[var(--highlight)] !mt-0 pointer-events-none"></div>
                                </div>
                            </div>

                            <!-- Pan Track -->
                            <div class="track-block !h-auto flex-1 flex flex-col justify-center gap-6" id="track-pan"
                                data-name="Pan" data-color="#ff4444">
                                <div class="flex items-center justify-start gap-2 w-full">
                                    <span class="track-title">Pan</span>
                                    <div class="track-indicator bg-[#ff4444] !mt-0 pointer-events-none"></div>
                                </div>
                            </div>

                            <!-- Tilt Track -->
                            <div class="track-block !h-auto flex-1 flex flex-col justify-center gap-6" id="track-tilt"
                                data-name="Tilt" data-color="#44ff44">
                                <div class="flex items-center justify-start gap-2 w-full">
                                    <span class="track-title">Tilt</span>
                                    <div class="track-indicator bg-[#44ff44] !mt-0 pointer-events-none"></div>
                                </div>
                            </div>
                        </div>

                        <!-- The actual curves will be rendered here -->
                        <div class="bg-[#0a0a0c] relative cursor-text group overflow-x-auto no-scrollbar min-w-0"
                            id="curve-area">
                            <div id="timeline-content" class="relative h-full" style="width: 6000px;">
                                <!-- Scrubbing Active Indicator Line -->
                                <div id="drag-indicator"
                                    class="absolute top-0 left-0 right-0 h-[1px] bg-red-600/70 z-50 pointer-events-none">
                                </div>

                                <!-- Timeline Ruler (Tick marks and time labels) -->
                                <div id="timeline-ruler"
                                    class="absolute top-0 left-0 right-0 h-[30px] border-b border-[#1B1B1D] bg-[#0a0a0c]/80 z-20 pointer-events-none origin-top overflow-hidden">
                                    <!-- Tick marks will be injected here via JS -->
                                </div>

                                <!-- Vertical Playhead Line (z-30 to stay above z-20 ruler) -->
                                <div id="playhead"
                                    class="absolute top-0 bottom-0 w-[2px] bg-red-600/70 z-30 cursor-ew-resize"
                                    style="left: 0px;">
                                    <!-- Draggable Tab at the top -->
                                    <div
                                        class="absolute -top-[1px] -left-[6px] w-[14px] h-[16px] bg-red-600 rounded-b-sm border-t border-red-400">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </div>

            <!-- 3. Right Sidebar (Settings) -->
            <div class="bg-[var(--bg-main)] flex flex-col p-2" id="right-sidebar">
                <h2 class="panel-header">Settings</h2>

                <!-- Selected Track Info -->
                <div id="selected-track-info"
                    class="flex items-center gap-2 mb-4 hidden bg-[#252528] p-2 rounded border border-white/5">
                    <div id="selected-track-color" class="w-3 h-3 rounded-full font-mono"></div>
                    <span id="selected-track-name" class="text-sm text-white font-bold opacity-90 tracking-wide"></span>
                </div>

                <!-- Export and Config -->
            </div>

        </div> <!-- End Main Workspace Area -->

    </div> <!-- End Application Layout -->

    <!-- Our blank JavaScript file -->
    <script src="app.js"></script>
</body>

</html>